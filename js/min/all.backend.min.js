slideshow_jquery_image_gallery_backend_script=function(){var t=jQuery,i={};return i.isBackendInitialized=!1,i.init=function(){i.isBackendInitialized||(i.isBackendInitialized=!0,t(document).trigger("slideshowBackendReady"))},t(document).ready(i.init),t(window).load(i.init),i}();slideshow_jquery_image_gallery_backend_script.generalSettings=function(){var t=jQuery,i={};return i.isCurrentPage=!1,i.init=function(){"slideshow_page_general_settings"===window.pagenow&&(i.isCurrentPage=!0,i.activateUserCapabilities())},i.activateUserCapabilities=function(){t("input").change(function(i){var e,s,n,o=t(i.currentTarget),a="slideshow-jquery-image-gallery-add-slideshows",h="slideshow-jquery-image-gallery-edit-slideshows",r="slideshow-jquery-image-gallery-delete-slideshows";"checkbox"==o.attr("type").toLowerCase()&&(e=o.attr("id").split("_"),s=e.shift(),n=e.join("_"),s!==h||o.attr("checked")?(s===a||s===r)&&t("#"+h+"_"+n).attr("checked",!0):(t("#"+a+"_"+n).attr("checked",!1),t("#"+r+"_"+n).attr("checked",!1)))})},t(document).bind("slideshowBackendReady",i.init),i}();slideshow_jquery_image_gallery_backend_script.editSlideshow=function(){var t=jQuery,i={};return i.isCurrentPage=!1,i.init=function(){"slideshow"===window.pagenow&&(i.isCurrentPage=!0,i.activateSettingsVisibilityDependency())},i.activateSettingsVisibilityDependency=function(){t(".depends-on-field-value").each(function(e,s){var n=t(s),o=n.attr("class").split(" "),a=n.closest("tr");t('input[name="'+o[1]+'"]:checked').val()==o[2]?a.show():a.hide(),t('input[name="'+o[1]+'"]').change(o,function(e){var s=t("."+o[3]).closest("tr");t(e.currentTarget).val()==o[2]?i.animateElementVisibility(s,!0):i.animateElementVisibility(s,!1)})})},i.animateElementVisibility=function(i,e){var s=t(i);void 0===e&&(s.stop(!0,!0),e=!s.is(":visible")),e?(s.show().css("background-color","#c0dd52"),setTimeout(function(){s.stop(!0,!0).animate({"background-color":"transparent"},1500)},500)):s.stop(!0,!0).hide()},t(document).bind("slideshowBackendReady",i.init),i}();slideshow_jquery_image_gallery_backend_script.shortcode=function(){var t=jQuery,i={};return i.init=function(){i.activateShortcodeInserter()},i.activateShortcodeInserter=function(){t(".insertSlideshowShortcodeSlideshowInsertButton").click(function(){var i="No slideshow selected.",e="slideshow_deploy",s=parseInt(t("#insertSlideshowShortcodeSlideshowSelect").val()),n=window.slideshow_jquery_image_gallery_backend_script_shortcode;return"object"==typeof n&&("object"==typeof n.data&&void 0!==n.data.shortcode&&n.data.shortcode.length>0&&(e=n.data.shortcode),"object"==typeof n.localization&&void 0!==n.localization.undefinedSlideshow&&n.localization.undefinedSlideshow.length>0&&(i=n.localization.undefinedSlideshow)),isNaN(s)?(alert(i),!1):(send_to_editor("["+e+" id='"+s+"']"),tb_remove(),!0)}),t(".insertSlideshowShortcodeCancelButton").click(function(){return tb_remove(),!1})},t(document).bind("slideshowBackendReady",i.init),i}();slideshow_jquery_image_gallery_backend_script.generalSettings.customStyles=function(){var t=jQuery,i={};return i.init=function(){slideshow_jquery_image_gallery_backend_script.generalSettings.isCurrentPage&&i.activateNavigation()},i.activateNavigation=function(){t(".nav-tab").click(function(i){var e,s=t(i.currentTarget),n=t(".nav-tab-active");n.removeClass("nav-tab-active"),s.addClass("nav-tab-active"),t(n.attr("href").replace("#",".")).hide(),t(s.attr("href").replace("#",".")).show(),e=t("input[name=_wp_http_referer]"),e.attr("value",e.attr("value").split("#").shift()+s.attr("href"))}),t('a[href="#'+document.URL.split("#").pop()+'"]').trigger("click")},t(document).bind("slideshowBackendReady",i.init),i}();slideshow_jquery_image_gallery_backend_script.generalSettings.customStyles=function(){var t=jQuery,i={};return i.init=function(){slideshow_jquery_image_gallery_backend_script.generalSettings.isCurrentPage&&(i.activateActionButtons(),i.activateDeleteButtons())},i.activateActionButtons=function(){t(".custom-styles-tab .styles-list .style-action.style-default").click(function(e){var s,n,o,a,h,r=t(e.currentTarget),l=r.closest("li").find(".style-title").html(),d=r.closest("li").find(".style-content").html(),c=window.slideshow_jquery_image_gallery_backend_script_generalSettings,u="slideshow-jquery-image-gallery-custom-styles";"string"!=typeof d||d.length<=0||("object"==typeof c&&("object"==typeof c.localization&&void 0!==c.localization.newCustomizationPrefix&&c.localization.newCustomizationPrefix.length>0&&(l=c.localization.newCustomizationPrefix+" - "+l),"object"==typeof c.data&&void 0!==c.data.customStylesKey&&c.data.customStylesKey.length>0&&(u=c.data.customStylesKey)),s=u+"_"+(i.getHighestCustomStyleID()+1),a=t(".custom-styles-tab .custom-style-templates"),n=a.find(".style-editor").clone(),n.addClass(s),n.find(".new-custom-style-title").attr("value",l),n.find(".new-custom-style-content").html(d),n.find(".new-custom-style-title").attr("name",u+"["+s+"][title]"),n.find(".new-custom-style-content").attr("name",u+"["+s+"][style]"),t(".custom-styles-tab .style-editors").append(n),setTimeout(function(){n.fadeIn(200)},200),o=a.find(".custom-styles-list-item").clone(!0),o.removeClass("custom-styles-list-item"),o.find(".style-title").html(l),o.find(".style-action").addClass(s),o.find(".style-delete").addClass(s),h=t(".custom-styles-tab .styles-list .custom-styles-list"),h.find(".no-custom-styles-found").remove(),h.append(o))}),t(".custom-styles-tab .styles-list .style-action, .custom-styles-tab .custom-style-templates .custom-styles-list-item .style-action").click(function(i){var e=t(i.currentTarget).attr("class").split(" ")[1];void 0!==e&&(t(".custom-styles-tab .style-editors .style-editor").each(function(i,e){t(e).fadeOut(200)}),setTimeout(function(){t(".style-editor."+e).fadeIn(200)},200))})},i.activateDeleteButtons=function(){t(".custom-styles-tab .styles-list .style-delete, .custom-styles-tab .custom-style-templates .custom-styles-list-item .style-delete").click(function(i){var e=t(i.currentTarget),s=e.attr("class").split(" ")[1],n=window.slideshow_jquery_image_gallery_backend_script_generalSettings,o="Are you sure you want to delete this custom style?";void 0!==s&&("object"==typeof n&&"object"==typeof n.localization&&void 0!==n.localization.confirmDeleteMessage&&n.localization.confirmDeleteMessage.length>0&&(o=n.localization.confirmDeleteMessage),confirm(o)&&(t(".custom-styles-tab .style-editors .style-editor."+s).remove(),e.closest("li").remove()))})},i.getHighestCustomStyleID=function(){var i=0;return t(".custom-styles-tab .style-editors .style-editor").each(function(e,s){var n=parseInt(t(s).attr("class").split("_").pop());n>i&&(i=n)}),parseInt(i)},t(document).bind("slideshowBackendReady",i.init),i}();slideshow_jquery_image_gallery_backend_script.editSlideshow.slideManager=function(){var t=jQuery,i={};return i.isCurrentPage=!1,i.init=function(){slideshow_jquery_image_gallery_backend_script.editSlideshow.isCurrentPage&&i.activate()},i.activate=function(){var e=t("#slideshow-slide-inserter-popup"),s=t("#slideshow-slide-inserter-popup-background"),n=e.find("#search");i.indexSlidesOrder(),t(".sortable-slides-list").sortable({revert:!0,placeholder:"sortable-placeholder",forcePlaceholderSize:!0,stop:function(){i.indexSlidesOrder()},cancel:"input, select, p"}),t(".wp-color-picker-field").wpColorPicker({width:234}),s.height(t(document).outerHeight(!0)),e.css({top:parseInt(t(window).height()/2-e.outerHeight(!0)/2,10),left:parseInt(t(window).width()/2-e.outerWidth(!0)/2,10)}),n.focus(),i.getSearchResults(),e.find("#close").click(i.closePopup),s.click(i.closePopup),e.find("#search-submit").click(i.getSearchResults),n.keypress(function(t){13==t.which&&(t.preventDefault(),i.getSearchResults())}),t("#slideshow-insert-image-slide").click(function(){e.css({display:"block"}),s.css({display:"block"})}),t("#slideshow-insert-text-slide").click(i.insertTextSlide),t("#slideshow-insert-video-slide").click(i.insertVideoSlide),t(".slideshow-delete-slide").click(function(e){i.deleteSlide(t(e.currentTarget).closest("li"))})},i.deleteSlide=function(t){var i="Are you sure you want to delete this slide?",e=window.slideshow_jquery_image_gallery_backend_script_editSlideshow;"object"==typeof e&&"object"==typeof e.localization&&void 0!==e.localization.confirm&&e.localization.confirm.length>0&&(i=e.localization.confirm),confirm(i)&&t.remove()},i.indexSlidesOrder=function(){t.each(t(".sortable-slides-list").find("li"),function(i,e){t.each(t(e).find("input, select, textarea"),function(e,s){var n=t(s),o=n.attr("name");void 0===o||o.length<=0||(o=o.replace(/[\[\]']+/g," ").split(" "),n.attr("name",o[0]+"["+(i+1)+"]["+o[2]+"]"))})})},i.getSearchResults=function(e){var s=t("#slideshow-slide-inserter-popup"),n=s.find("#results"),o=[];e=parseInt(e),isNaN(e)&&(e=0,n.html("")),t.each(n.find(".result-table-row"),function(i,e){o.push(parseInt(t(e).attr("data-attachment-id")))}),t.post(window.ajaxurl,{action:"slideshow_slide_inserter_search_query",search:s.find("#search").attr("value"),offset:e,attachmentIDs:o},function(e){var s;n.append(e),n.find(".insert-attachment").unbind("click").click(function(e){var s=t(e.currentTarget).closest("tr");i.insertImageSlide(s.attr("data-attachment-id"),s.find(".title").text(),s.find(".description").text(),s.find(".image img").attr("src"))}),s=t(".load-more-results"),s&&s.click(function(e){var s=t(e.currentTarget),n=s.attr("data-offset");s.closest("tr").hide(),isNaN(parseInt(n))||i.getSearchResults(n)})})},i.insertImageSlide=function(e,s,n,o){var a=t(".image-slide-template").find("li").clone();a.find(".attachment").attr("src",o),a.find(".attachment").attr("title",s),a.find(".attachment").attr("alt",s),a.find(".title").attr("value",s),a.find(".description").html(n),a.find(".postId").attr("value",e),a.find(".title").attr("name","slides[0][title]"),a.find(".description").attr("name","slides[0][description]"),a.find(".url").attr("name","slides[0][url]"),a.find(".urlTarget").attr("name","slides[0][urlTarget]"),a.find(".type").attr("name","slides[0][type]"),a.find(".postId").attr("name","slides[0][postId]"),a.find(".slideshow-delete-slide").click(function(e){i.deleteSlide(t(e.currentTarget).closest("li"))}),t(".sortable-slides-list").prepend(a),i.indexSlidesOrder()},i.insertTextSlide=function(){var e=t(".text-slide-template").find("li").clone();e.find(".title").attr("name","slides[0][title]"),e.find(".description").attr("name","slides[0][description]"),e.find(".textColor").attr("name","slides[0][textColor]"),e.find(".color").attr("name","slides[0][color]"),e.find(".url").attr("name","slides[0][url]"),e.find(".urlTarget").attr("name","slides[0][urlTarget]"),e.find(".type").attr("name","slides[0][type]"),e.find(".slideshow-delete-slide").click(function(e){i.deleteSlide(t(e.currentTarget).closest("li"))}),e.find(".color, .textColor").wpColorPicker(),t(".sortable-slides-list").prepend(e),i.indexSlidesOrder()},i.insertVideoSlide=function(){var e=t(".video-slide-template").find("li").clone();e.find(".videoId").attr("name","slides[0][videoId]"),e.find(".showRelatedVideos").attr("name","slides[0][showRelatedVideos]"),e.find(".type").attr("name","slides[0][type]"),e.find(".slideshow-delete-slide").click(function(e){i.deleteSlide(t(e.currentTarget).closest("li"))}),t(".sortable-slides-list").prepend(e),i.indexSlidesOrder()},i.closePopup=function(){t("#slideshow-slide-inserter-popup, #slideshow-slide-inserter-popup-background").css({display:"none"})},t(document).bind("slideshowBackendReady",i.init),i}();